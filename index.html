<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Leaderboard</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Welcome to the Game</h1>
    <h2>Leaderboard</h2>
    <div id="leaderboard"></div>

    <script>
      async function fetchLeaderboard() {
        try {
          const response = await fetch("./data.json"); // Fetch from the data.json file
          const data = await response.json();

          // Sort and display top scores
          const sortedData = data
            .sort((a, b) => b.score - a.score) // Sort by score in descending order
            .slice(0, 5); // Display top 5 players

          const leaderboard = document.getElementById("leaderboard");
          leaderboard.innerHTML = sortedData
            .map(
              (entry) =>
                `<p>${entry.name}: ${entry.score} (Levels: ${entry.levels})</p>`
            )
            .join("");
        } catch (error) {
          console.error("Failed to fetch leaderboard data:", error);
          document.getElementById("leaderboard").innerHTML =
            "<p>Failed to load leaderboard data.</p>";
        }
      }

      // Fetch and display leaderboard on page load
      window.onload = fetchLeaderboard;
    </script>
  </body>
</html>
